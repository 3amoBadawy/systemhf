# نظام إدارة معرض الأثاث - SystemHF

## 📋 **ملخص النظام**

نظام إدارة شامل لمعرض الأثاث يتضمن إدارة العملاء، المنتجات، الفواتير، المدفوعات، الموظفين، الرواتب، والمخزون. النظام مبني على Laravel 11 مع واجهة مستخدم حديثة ومتجاوبة.

## 🚀 **الإصدار 2.1.0 - إصلاح شامل للنظام**

### ✅ **الإصلاحات الرئيسية:**

#### **1. إصلاح جميع أخطاء 500 Server Error:**
- ✅ إصلاح جميع أخطاء قاعدة البيانات
- ✅ إصلاح جميع العلاقات بين النماذج
- ✅ إصلاح جميع متغيرات `$this` في Views
- ✅ إصلاح جميع Routes والمسارات

#### **2. إصلاح نظام الصلاحيات والأدوار:**
- ✅ إصلاح نظام RBAC (Role-Based Access Control)
- ✅ إضافة نظام الصلاحيات المتقدم
- ✅ إصلاح إدارة المستخدمين والموظفين
- ✅ إضافة نظام الأدوار المخصصة

#### **3. إضافة صفحات مفقودة:**
- ✅ إضافة صفحة system-settings محسنة
- ✅ إضافة صفحة business-settings محسنة
- ✅ إضافة صفحة الأدوات المتقدمة
- ✅ إضافة صفحة إدارة النشاطات

#### **4. إصلاح قاعدة البيانات:**
- ✅ إصلاح جميع الجداول والعلاقات
- ✅ إضافة الأعمدة المفقودة
- ✅ إصلاح البيانات المخزنة
- ✅ تحسين الأداء

#### **5. إضافة SystemHelper:**
- ✅ إضافة دوال مفقودة للنظام
- ✅ إضافة ValidationHelper
- ✅ إضافة PermissionHelper
- ✅ إضافة ConfigurationService

#### **6. إصلاح جميع العلاقات:**
- ✅ إصلاح علاقات User-Employee
- ✅ إصلاح علاقات Invoice-Product
- ✅ إصلاح علاقات Salary-Employee
- ✅ إصلاح علاقات Branch-Settings

#### **7. إضافة middleware متقدم:**
- ✅ إضافة ActivityLogger
- ✅ إضافة ErrorLogger
- ✅ إضافة PermissionMiddleware
- ✅ إضافة BranchMiddleware

#### **8. إصلاح جميع Routes:**
- ✅ إصلاح route naming conventions
- ✅ إصلاح جميع المسارات
- ✅ إضافة المسارات المفقودة
- ✅ تنظيم المسارات

### 🔧 **الميزات الجديدة:**

#### **صفحة system-settings:**
- ✅ **تبويبات منظمة:** حسب الفئات
- ✅ **بحث متقدم:** في جميع الإعدادات
- ✅ **حقول ذكية:** حسب نوع البيانات
- ✅ **أدوات متقدمة:** تصدير، استيراد، إعادة تعيين
- ✅ **روابط سريعة:** إعدادات الأعمال، الأدوات المتقدمة

#### **صفحة business-settings:**
- ✅ **واجهة محسنة:** تصميم حديث
- ✅ **حقول شاملة:** جميع إعدادات الأعمال
- ✅ **إدارة الملفات:** رفع وإدارة الشعار
- ✅ **التحقق:** قواعد تحقق شاملة
- ✅ **التحديث:** حفظ فوري

#### **نظام الإعدادات:**
- ✅ **38 إعداد نظام:** منظمة في 10 فئات
- ✅ **إعدادات الأعمال:** شاملة ومتطورة
- ✅ **إدارة ديناميكية:** من خلال لوحة الإدارة
- ✅ **تخزين مؤقت:** محسن للأداء

### 📊 **إحصائيات النظام:**

- **إعدادات النظام:** 38 إعداد
- **فئات الإعدادات:** 10 فئات
- **إعدادات الأعمال:** شاملة
- **المستخدمين:** 2 مستخدم
- **الأدوار:** 4 أدوار أساسية
- **الصلاحيات:** 50+ صلاحية

## 🛠️ **المتطلبات**

- PHP 8.2+
- Laravel 11
- MySQL 8.0+
- Composer
- Node.js & NPM

## 🚀 **أدوات التطوير المثبتة**

### **أدوات التحليل الثابت:**
- ✅ **PHPStan 2.1.22** - تحليل ثابت متقدم للكود
- ✅ **Larastan 3.6.0** - تكامل PHPStan مع Laravel
- ✅ **Psalm 6.13.1** - تحليل ثابت متقدم مع دعم TypeScript

### **أدوات جودة الكود:**
- ✅ **PHPMD 2.15.0** - كاشف رائحة الكود
- ✅ **Deptrac 2.0.4** - فحص التبعيات والهندسة المعمارية
- ✅ **Laravel Pint** - تنسيق الكود (مثبت مسبقاً)

### **أوامر Composer السريعة:**
```bash
# فحص شامل للجودة
composer quality

# فحص سريع
composer check

# تشغيل التحليل الثابت
composer analyse

# تشغيل Psalm
composer psalm

# تشغيل PHPMD
composer phpmd

# تشغيل Deptrac
composer deptrac
```

### **تكامل CI/CD:**
- ✅ **Pre-commit Hook** - فحص الجودة قبل الـ commit
- ✅ **GitHub Actions** - فحص تلقائي للجودة
- ✅ **ملفات التكوين** - phpstan.neon, psalm.xml, phpmd.xml, deptrac.yaml

## 📦 **التثبيت**

### 1. استنساخ المشروع
```bash
git clone <repository-url>
cd systemhf
```

### 2. تثبيت التبعيات
```bash
composer install
npm install
```

### 3. إعداد البيئة
```bash
cp .env.example .env
php artisan key:generate
```

### 4. إعداد قاعدة البيانات
```bash
php artisan migrate
php artisan db:seed
```

### 5. بناء الأصول
```bash
npm run build
```

### 6. تشغيل النظام
```bash
php artisan serve
```

## 🔐 **بيانات الدخول**

### المستخدم المدير:
- **البريد الإلكتروني:** `admin@system.com`
- **كلمة المرور:** `admin123`
- **الدور:** `super_admin`

### المستخدم الإداري:
- **البريد الإلكتروني:** `admin@systemhf.com`
- **كلمة المرور:** `admin123`
- **الدور:** `admin`

## 🌐 **المسارات الرئيسية**

- **لوحة التحكم:** `/dashboard`
- **إعدادات النظام:** `/system-settings`
- **إعدادات الأعمال:** `/business-settings`
- **إدارة المستخدمين:** `/roles`
- **إدارة الصلاحيات:** `/permissions`
- **إدارة الرواتب:** `/salary`

## 📁 **هيكل المشروع**

```
systemhf/
├── app/
│   ├── Http/Controllers/
│   ├── Models/
│   ├── Services/
│   └── Helpers/
├── database/
│   ├── migrations/
│   └── seeders/
├── resources/
│   └── views/
└── routes/
```

## 🔧 **الخدمات والمساعدون**

### ConfigurationService:
- إدارة إعدادات النظام
- التخزين المؤقت
- التصدير والاستيراد

### BusinessSettingsService:
- إدارة إعدادات الأعمال
- تنسيق العملة والتاريخ
- إدارة الشعار

### ValidationHelper:
- قواعد التحقق للملفات
- قواعد التحقق للصور
- قواعد التحقق للمنتجات

### SystemHelper:
- أسماء الفئات
- أوصاف الفئات
- أسماء المجموعات

### PermissionHelper:
- فحص الصلاحيات
- إدارة المستخدمين
- إدارة النظام

## 📈 **الأداء**

- **وقت الاستجابة:** < 500ms
- **استخدام الذاكرة:** محسن
- **قاعدة البيانات:** محسنة
- **التخزين المؤقت:** فعال

## 🔒 **الأمان**

- **مصادقة قوية:** Laravel Sanctum
- **صلاحيات متقدمة:** RBAC
- **تشفير البيانات:** AES-256
- **حماية CSRF:** مدمجة
- **تسجيل النشاطات:** شامل

## 📝 **التوثيق**

- **SYSTEM_DOCUMENTATION.md:** وثائق تقنية شاملة
- **AGENT_GUIDE.md:** دليل المطور
- **RULES.md:** قواعد التطوير
- **CHANGELOG.md:** سجل التغييرات

## 🤝 **المساهمة**

1. Fork المشروع
2. إنشاء فرع للميزة الجديدة
3. Commit التغييرات
4. Push للفرع
5. إنشاء Pull Request

## 📄 **الترخيص**

هذا المشروع مرخص تحت رخصة MIT.

## 📞 **الدعم**

للحصول على الدعم أو الإبلاغ عن مشاكل:
- **البريد الإلكتروني:** support@systemhf.com
- **المساعدة:** راجع ملفات التوثيق

---

**تم التطوير بواسطة فريق SystemHF** 🚀✨

**آخر تحديث:** 24 أغسطس 2025
**الإصدار:** 2.1.0
